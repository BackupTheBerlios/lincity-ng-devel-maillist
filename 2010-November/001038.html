<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Lincity-ng-devel] MP_* lookups with bad coordinates cause	segfaults
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/lincity-ng-devel/2010-November/index.html" >
   <LINK REL="made" HREF="mailto:lincity-ng-devel%40lists.berlios.de?Subject=Re%3A%20%5BLincity-ng-devel%5D%20MP_%2A%20lookups%20with%20bad%20coordinates%20cause%0A%09segfaults&In-Reply-To=%3C87d3qgn78x.fsf%40guu.fi%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001033.html">
   <LINK REL="Next"  HREF="001041.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Lincity-ng-devel] MP_* lookups with bad coordinates cause	segfaults</H1>
    <B>Henri Kemppainen</B> 
    <A HREF="mailto:lincity-ng-devel%40lists.berlios.de?Subject=Re%3A%20%5BLincity-ng-devel%5D%20MP_%2A%20lookups%20with%20bad%20coordinates%20cause%0A%09segfaults&In-Reply-To=%3C87d3qgn78x.fsf%40guu.fi%3E"
       TITLE="[Lincity-ng-devel] MP_* lookups with bad coordinates cause	segfaults">duclare at guu.fi
       </A><BR>
    <I>Sun Nov  7 22:39:26 CET 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="001033.html">[Lincity-ng-devel] MP_* lookups with bad coordinates cause	segfaults
</A></li>
        <LI>Next message: <A HREF="001041.html">[Lincity-ng-devel] MP_* lookups with bad coordinates cause	segfaults
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1038">[ date ]</a>
              <a href="thread.html#1038">[ thread ]</a>
              <a href="subject.html#1038">[ subject ]</a>
              <a href="author.html#1038">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Sorry, I should have been more specific in my original report.

&gt;<i> Which version do you use ?
</I>&gt;<i> On which plateform ? (vista, debian lenny ...)
</I>It's broken in the latest release, but I also tried SVN r1604 on Debian
Squeeze.

&gt;<i> Can yo send me (to my personnal email, not to the list) a game with this
</I>&gt;<i> behavior and tell me roughtly how to reproduce
</I>&gt;<i> (eg buldoze on north, or build farm south west should be enought)
</I>This happens on all new games (I start with empty board).  It looks like
you have to reach quite far from the board so try this: start a game,
zoom out all the way, and select a house for building.  Chances are
it'll crash as soon as the menu disappears, but if it doesn't happen,
move the cursor to the top edge of the screen (and let it scroll).


Core was generated by `./lincity-ng'.
Program terminated with signal 11, Segmentation fault.
#0  0x000000000045cc3d in GameView::buildCost (this=0x7f4b208652d0,
tile=...)
    at src/lincity-ng/GameView.cpp:1793
1793        if (MP_TYPE( tile.x, tile.y ) == CST_USED)
(gdb) print tile
$1 = {x = -84, y = 28}
(gdb) bt
#0  0x000000000045cc3d in GameView::buildCost (this=0x7f4b208652d0,
tile=...)
    at src/lincity-ng/GameView.cpp:1793
#1  0x000000000045c183 in GameView::draw (this=0x7f4b208652d0,
painter=...)
    at src/lincity-ng/GameView.cpp:1685
#2  0x000000000046e62a in Component::drawChild (this=0x7f4b20864520,
    child=..., painter=...) at src/gui/Component.cpp:66
#3  0x000000000046e6e9 in Component::draw (this=0x7f4b20864520,
painter=...)
    at src/gui/Component.cpp:81
#4  0x0000000000485c2b in Desktop::draw (this=0x7f4b20864520,
painter=...)
    at src/gui/Desktop.cpp:108
#5  0x00000000004247d4 in Game::run (this=0x7f4b2024c270)
    at src/lincity-ng/Game.cpp:238
#6  0x0000000000413549 in mainLoop () at src/lincity-ng/main.cpp:409
#7  0x0000000000414195 in main (argc=1, argv=0x7fff4bb71858)
    at src/lincity-ng/main.cpp:557


It occurs the same way with the bulldozer selected, but crashes in
bulldozeCost.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001033.html">[Lincity-ng-devel] MP_* lookups with bad coordinates cause	segfaults
</A></li>
	<LI>Next message: <A HREF="001041.html">[Lincity-ng-devel] MP_* lookups with bad coordinates cause	segfaults
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1038">[ date ]</a>
              <a href="thread.html#1038">[ thread ]</a>
              <a href="subject.html#1038">[ subject ]</a>
              <a href="author.html#1038">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/lincity-ng-devel">More information about the Lincity-ng-devel
mailing list</a><br>
</body></html>
