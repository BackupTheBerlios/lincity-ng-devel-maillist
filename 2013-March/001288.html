<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Lincity-ng-devel] [Patch #3430] fix format not a string literal	error
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/lincity-ng-devel/2013-March/index.html" >
   <LINK REL="made" HREF="mailto:lincity-ng-devel%40lists.berlios.de?Subject=Re%3A%20%5BLincity-ng-devel%5D%20%5BPatch%20%233430%5D%20fix%20format%20not%20a%20string%20literal%0A%09error&In-Reply-To=%3C201303091802.r29I25Su015795%40www.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001291.html">
   <LINK REL="Next"  HREF="001290.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Lincity-ng-devel] [Patch #3430] fix format not a string literal	error</H1>
    <B>admin at berlios.de</B> 
    <A HREF="mailto:lincity-ng-devel%40lists.berlios.de?Subject=Re%3A%20%5BLincity-ng-devel%5D%20%5BPatch%20%233430%5D%20fix%20format%20not%20a%20string%20literal%0A%09error&In-Reply-To=%3C201303091802.r29I25Su015795%40www.berlios.de%3E"
       TITLE="[Lincity-ng-devel] [Patch #3430] fix format not a string literal	error">admin at berlios.de
       </A><BR>
    <I>Sat Mar  9 19:02:05 CET 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="001291.html">[Lincity-ng-devel] New residential buildings
</A></li>
        <LI>Next message: <A HREF="001290.html">[Lincity-ng-devel] [Bug #18917] Please utilize less system resources
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1288">[ date ]</a>
              <a href="thread.html#1288">[ thread ]</a>
              <a href="subject.html#1288">[ subject ]</a>
              <a href="author.html#1288">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Patch #3430 has been updated. 

Project: lincity-ng
Category: None
Status: Out of date
Submitted by: apoleon
Assigned to : none
Summary: fix format not a string literal error

Follow-Ups:

Date: 2013-Mar-04 22:36
By: apoleon

Comment:
I have compiled LinCityNG with Debian Unstable and the GNU C++ compiler, version 4.7.2.

Debian as other Linux distributions has started to make us of certain hardening build flags. <A HREF="http://wiki.debian.org/Hardening">http://wiki.debian.org/Hardening</A>

The game was compiled with -Werror=format-security, and these kind of warnings are treated as errors thus LinCityNG fails to build from source. Quoting the gcc man page.

<A HREF="http://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html">http://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html</A>

If -Wformat is specified, also warn about uses of format functions that represent possible security problems. At present, this warns about calls to printf and scanf functions where the format string is not a string literal and there are no format arguments, as in printf (foo);. This may be a security hole if the format string came from untrusted input and contains %n. 

So the compiler warns about &quot;possible&quot; security problems and treats them as errors. I need to apply this patch in order to build the game successfully.


-------------------------------------------------------

Date: 2013-Mar-09 19:02
By: wolfgangb

Comment:
fixed in r1566.
<A HREF="http://svn.berlios.de/viewvc/lincity-ng?view=revision&amp;revision=1566">http://svn.berlios.de/viewvc/lincity-ng?view=revision&amp;revision=1566</A>
-------------------------------------------------------

Date: 2013-Mar-04 22:13
By: wolfgangb

Comment:
Which compiler gives that warning? If I understand this correctly it complains 
about the format string being generated at runtime from translations. That way
the compiler can't check if the string contains a place-holder. So why is it a fix to 
add one argument? What if someone translates the message to contain 
several place-holders? And why does it accept all the other snprintf with 
translatable format strings in that file?

-------------------------------------------------------

-------------------------------------------------------
For more info, visit:

<A HREF="http://developer.berlios.de/patch/?func=detailpatch&amp;patch_id=3430&amp;group_id=2929">http://developer.berlios.de/patch/?func=detailpatch&amp;patch_id=3430&amp;group_id=2929</A>
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001291.html">[Lincity-ng-devel] New residential buildings
</A></li>
	<LI>Next message: <A HREF="001290.html">[Lincity-ng-devel] [Bug #18917] Please utilize less system resources
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1288">[ date ]</a>
              <a href="thread.html#1288">[ thread ]</a>
              <a href="subject.html#1288">[ subject ]</a>
              <a href="author.html#1288">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/lincity-ng-devel">More information about the Lincity-ng-devel
mailing list</a><br>
</body></html>
