<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Lincity-ng-devel] [Bug #12097] Save game don't load in windows	1.1.1pre
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/lincity-ng-devel/2007-November/index.html" >
   <LINK REL="made" HREF="mailto:lincity-ng-devel%40lists.berlios.de?Subject=Re%3A%20%5BLincity-ng-devel%5D%20%5BBug%20%2312097%5D%20Save%20game%20don%27t%20load%20in%20windows%0A%091.1.1pre&In-Reply-To=%3C200711041745.lA4HjrSB004908%40unicorn.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000205.html">
   <LINK REL="Next"  HREF="000207.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Lincity-ng-devel] [Bug #12097] Save game don't load in windows	1.1.1pre</H1>
    <B>admin at berlios.de</B> 
    <A HREF="mailto:lincity-ng-devel%40lists.berlios.de?Subject=Re%3A%20%5BLincity-ng-devel%5D%20%5BBug%20%2312097%5D%20Save%20game%20don%27t%20load%20in%20windows%0A%091.1.1pre&In-Reply-To=%3C200711041745.lA4HjrSB004908%40unicorn.berlios.de%3E"
       TITLE="[Lincity-ng-devel] [Bug #12097] Save game don't load in windows	1.1.1pre">admin at berlios.de
       </A><BR>
    <I>Sun Nov  4 18:45:53 CET 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000205.html">[Lincity-ng-devel] [Bug #12328] Savegame in global Directory
</A></li>
        <LI>Next message: <A HREF="000207.html">[Lincity-ng-devel] Fwd: original simcity to be GPLed
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#206">[ date ]</a>
              <a href="thread.html#206">[ thread ]</a>
              <a href="subject.html#206">[ subject ]</a>
              <a href="author.html#206">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Bug #12097, was updated on 2007-Sep-30 15:08
Here is a current snapshot of the bug.

Project: LinCityNG
Category: None
Status: Closed
Resolution: Later
Bug Group: Windows
Priority: 5
Submitted by: asterix
Assigned to : none
Summary: Save game don't load in windows 1.1.1pre

Details: The list shows the correct number of games, but the same name for all the games, and it's usually not a save game name (first time I loaded this version, it was &quot;results&quot;); the game then crashes on load (I guess that's because it loads an invalid file).

If I delete every other file in the save game directory, (including &quot;results&quot; and any subdirectories), then the only save game left loads.


Follow-Ups:

Date: 2007-Nov-04 18:45
By: wolfgangb

Comment:
Something in MainMenu.cpp with recentfile and curfile 
is broken in windows. Will ignore timestamp in win for now.  
-------------------------------------------------------

Date: 2007-Nov-03 20:08
By: wolfgangb

Comment:
Seems to work now. Make sure to include the correct binary in 1.1.2
-------------------------------------------------------

Date: 2007-Oct-02 19:04
By: asterix

Comment:
OK, looked at the (bz2) source and... Well, it seems perfectly fine.

My exe correctly detects and loads the files, except it ALWAYS loads the last file as cption. 

It seems as if, in the exe I have (which I re-downloaded from the site, and is now 1.1.1, without the pre), the lines of MainMenu.cpp

            std::string f= recentfile-&gt;d_name;
            button-&gt;setCaptionText(f);

were changed to something like

            button-&gt;setCaptionText(            std::string ( curfile-&gt;d_name ));

Note the subtle difference: it should be

            button-&gt;setCaptionText(            std::string ( recentfile-&gt;d_name ));

Otherwise it will always set the caption to the last parsed file, which is exactly what seems to be happening to me.

Thanks,

*
-------------------------------------------------------

Date: 2007-Oct-01 23:25
By: wolfgangb

Comment:
Please download the updated lincity-ng.exe from
<A HREF="http://prdownload.berlios.de/lincity-ng/lincity-ng_1_1_1a.exe">http://prdownload.berlios.de/lincity-ng/lincity-ng_1_1_1a.exe</A>
and tell me, if it solves the problem. 
-------------------------------------------------------

Date: 2007-Oct-01 00:25
By: asterix

Comment:
The installer is  lincity-ng_1_1_1.exe, but the title bar says 1.1.1pre...

What actually happens is, the game doesn't load the right file: for some reason, it always loads the first file it finds in the directory.

If that happens to be a save game, it loads it correctly, otherwise it crashes. The strange thing is, the number of save games shown actually matches the number of valid save games...
-------------------------------------------------------

Date: 2007-Oct-01 00:05
By: bugmenot

Comment:
Where did you still get the pre? 1.1.1. is released. 
I don't see any problems loading savegames in XP. 
But if I rename some random file to 1_savegame and try to
load it, lincity crashes. Looks like a bad case of garbag- in 
garbage-out.  Someone please fix that.
-------------------------------------------------------

For detailed info, follow this link:
<A HREF="http://developer.berlios.de/bugs/?func=detailbug&amp;bug_id=12097&amp;group_id=2929">http://developer.berlios.de/bugs/?func=detailbug&amp;bug_id=12097&amp;group_id=2929</A>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000205.html">[Lincity-ng-devel] [Bug #12328] Savegame in global Directory
</A></li>
	<LI>Next message: <A HREF="000207.html">[Lincity-ng-devel] Fwd: original simcity to be GPLed
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#206">[ date ]</a>
              <a href="thread.html#206">[ thread ]</a>
              <a href="subject.html#206">[ subject ]</a>
              <a href="author.html#206">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/lincity-ng-devel">More information about the Lincity-ng-devel
mailing list</a><br>
</body></html>
